<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Johnny Ji's Blog</title>
  <meta name="description" content="It’s by convention, awful practice to be performing business logic within your controllers.">
  <link rel="stylesheet" href="http://johnnyji.me/css/main.css">
  <link rel="canonical" href="/rails/2015/05/19/lib-folder-vs-services-in-rails.html">
  <link rel="alternate" type="application/rss+xml" title="Johnny Ji" href="/feed.xml"" />
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400i|Open+Sans:600,400" rel="stylesheet">
</head>


  <body class="lite">

    <header class="header header-lite">
  <a class="header-title header-title-lite" href="http://johnnyji.me">JOHNNY JI</a>
  <div class="header-social-media">
    <a href="https://www.github.com/johnnyji" target="_blank" class="header-social-media-link github header-lite">
      <i class="fa fa-github header-lite"></i>
    </a>
    <a href="https://www.twitter.com/johnnyisji" target="_blank" class="header-social-media-link twitter header-lite">
      <i class="fa fa-twitter header-lite"></i>
    </a>
    <a href="https://www.linkedin.com/in/johnnyji" target="_blank" class="header-social-media-link linkedin header-lite">
      <i class="fa fa-linkedin header-lite"></i>
    </a>
    <a href="https://www.instagram.com/johnnyisji"" target="_blank" class="header-social-media-link instagram header-lite">
      <i class="fa fa-instagram header-lite"></i>
    </a>
  </div>
</header>
    

    <div class="page-container">
      <div class="single-post">
  <header class="single-post-header">
    <h1 class="single-post-header-title">Lib Folder vs. Services in Rails</h1>
    <p class="single-post-header-date">// May 19, 2015</p>
  </header>
  <div class="single-post-content"><p>It’s by convention, awful practice to be performing business logic within your controllers.</p>

<p>Logic should always be stored in some type of class or model. The sole purpose of the controller is to direct the flow of the application to different places.Logic pertaining to any specific dataset or object should belong in the corresponding model. <em>But where does all my other logic go?</em></p>

<p>Well all other logic can be be created into their own classes and be put either in the <code class="highlighter-rouge">lib</code> folder or be created as service objects in the <code class="highlighter-rouge">services</code> folder. So under which condition should we use which?
<br /><br /></p>

<p><strong>Service objects</strong></p>

<p>Service objects are classes that perform business logic for your application. These classes should be stored in a Services folder in your app directory. An example is retrieving hashtags out of a post body and reembedding them as links in the post creation process. In this case, <code class="highlighter-rouge">EmbedHashtags</code> should be a service object and in order to initiate it. You would need to call:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># this service object lives in app/services/embed_hashtags.rb</span>
<span class="no">EmbedHashtags</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="vi">@post</span><span class="p">.</span><span class="nf">body</span><span class="p">).</span><span class="nf">call</span></code></pre></figure>

<p><br /></p>

<p><strong>Classes in the lib folder</strong></p>

<p>Whenever a task is generic and can be used independently regardless of the paticular app it’s in. It should be stored in the lib folder as a class. A good example is different Oauth login procedures such as classes like <code class="highlighter-rouge">FacebookAuth</code> or <code class="highlighter-rouge">GithubAuth</code>. These classes could be exported to other apps and would work just as fine.</p>
</div>
</div>

    </div>

  </body>

</html>